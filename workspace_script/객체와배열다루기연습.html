<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<body>
   <h2>객체와 배열 다루기</h2>

   <script>
      const movie_info = [
         {
            movie_title : '영화1',
            theater : ['울산점', '부산점', '서울점'],
            grade : [4.0, 5.0, 3.2]
         },
         {
            movie_title : '영화2',
            theater : ['대구점', '부산점', '서울점'],
            grade : [3.3, 4.0, 4.2]
         },
         {
            movie_title : '영화3',
            theater : ['울산점', '대전점', '제주점'],
            grade : [2.5, 4.5, 4.3]
         }
      ];

      // 영화 중에서 평균 평점이 가장 높은 영화의 평균 평점과 영화명을 출력

      // 1. 반복하면서 각 영화으이 평점 평균을 계산
      let max_grade = 0;
      movie_info.forEach(function(movie, i){
         // 각 영화의 평점 배열의 요소의 합을 구함
         let sum = 0;
         for (const grade of movie.grade) {
            sum = sum + grade;
         }
         const avg = sum / movie.grade.length;
            console.log(avg);
            if(max_grade < avg) {
               max_grade = avg;
            }
         });
         console.log(max_grade);
         
         // 영화제목이 영화2 인 영화를 제외한 나머지 영화의 모든 상영관명을 배열에 저장

         const arr = [];
         movie_info.forEach(function(movie, i) {
            if (movie.movie_title != '영화2') {
               for (const th of movie.theater)
               arr.push(th);
         }
      })
      console.log('\n');
      console.log(arr);
      
   </script>
</body>
</html>